{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"C:\\\\Users\\\\shmaj\\\\CodeFellows\\\\401\\\\401n16\\\\ReactNative\\\\app\\\\components\\\\StorageMain.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport AsyncStorage from \"react-native-web/dist/exports/AsyncStorage\";\nimport Config from \"./Config\";\nimport Header from \"./Header\";\nimport Footer from \"./Footer\";\nimport Notes from \"./Note\";\n\nvar MainStorage = function (_React$Component) {\n  _inherits(MainStorage, _React$Component);\n\n  var _super = _createSuper(MainStorage);\n\n  function MainStorage(props) {\n    var _this;\n\n    _classCallCheck(this, MainStorage);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      notes: [],\n      note: ''\n    };\n    return _this;\n  }\n\n  _createClass(MainStorage, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var notes;\n      return _regeneratorRuntime.async(function componentDidMount$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(AsyncStorage.getItem('notes'));\n\n            case 2:\n              notes = _context.sent;\n\n              if (notes && notes.length > 0) {\n                this.setState({\n                  notes: JSON.parse(notes)\n                });\n              }\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"updateAsyncStorage\",\n    value: function updateAsyncStorage(notes) {\n      return new Promise(function _callee(resolve, reject) {\n        return _regeneratorRuntime.async(function _callee$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                _context2.next = 3;\n                return _regeneratorRuntime.awrap(AsyncStorage.removeItem('notes'));\n\n              case 3:\n                _context2.next = 5;\n                return _regeneratorRuntime.awrap(AsyncStorage.setItem('notes', JSON.stringify(notes)));\n\n              case 5:\n                return _context2.abrupt(\"return\", resolve(true));\n\n              case 8:\n                _context2.prev = 8;\n                _context2.t0 = _context2[\"catch\"](0);\n                return _context2.abrupt(\"return\", reject(_context2.t0));\n\n              case 11:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, null, null, [[0, 8]], Promise);\n      });\n    }\n  }, {\n    key: \"cloneNotes\",\n    value: function cloneNotes() {\n      return _toConsumableArray(this.state.notes);\n    }\n  }, {\n    key: \"addNote\",\n    value: function addNote() {\n      var notes;\n      return _regeneratorRuntime.async(function addNote$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              if (!(this.state.note.length <= 0)) {\n                _context3.next = 2;\n                break;\n              }\n\n              return _context3.abrupt(\"return\");\n\n            case 2:\n              _context3.prev = 2;\n              notes = this.cloneNotes();\n              notes.push(this.state.note);\n              _context3.next = 7;\n              return _regeneratorRuntime.awrap(this.updateAsyncStorage(notes));\n\n            case 7:\n              this.setState({\n                notes: notes,\n                note: ''\n              });\n              _context3.next = 13;\n              break;\n\n            case 10:\n              _context3.prev = 10;\n              _context3.t0 = _context3[\"catch\"](2);\n              alert(_context3.t0);\n\n            case 13:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, null, this, [[2, 10]], Promise);\n    }\n  }, {\n    key: \"removeNote\",\n    value: function removeNote(key) {\n      var notes;\n      return _regeneratorRuntime.async(function removeNote$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.prev = 0;\n              notes = this.cloneNotes();\n              notes.splice(key, 1);\n              _context4.next = 5;\n              return _regeneratorRuntime.awrap(this.updateAsyncStorage(notes));\n\n            case 5:\n              this.setState({\n                notes: notes\n              });\n              _context4.next = 11;\n              break;\n\n            case 8:\n              _context4.prev = 8;\n              _context4.t0 = _context4[\"catch\"](0);\n              alert(_context4.t0);\n\n            case 11:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, null, this, [[0, 8]], Promise);\n    }\n  }, {\n    key: \"renderNotes\",\n    value: function renderNotes() {\n      var _this2 = this;\n\n      return this.state.notes.map(function (note, i) {\n        return React.createElement(TouchableOpacity, {\n          key: i,\n          style: styles.note,\n          onPress: function onPress() {\n            return _this2.removeNote(i);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 17\n          }\n        }, React.createElement(Text, {\n          style: styles.noteText,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 21\n          }\n        }, note));\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var notes = this.state.notes.map(function (val, key) {\n        return React.createElement(Note, {\n          key: key,\n          keyval: key,\n          val: val,\n          deleteMethod: function deleteMethod() {\n            return _this3.removeNote(key);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 20\n          }\n        });\n      });\n      return React.createElement(View, {\n        style: styles.container,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 13\n        }\n      }, React.createElement(Header, {\n        title: Config.title,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 17\n        }\n      }), React.createElement(ScrollView, {\n        style: styles.scrollView,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 17\n        }\n      }, this.renderNotes()), React.createElement(Footer, {\n        onChangeText: function onChangeText(note) {\n          return _this3.setState({\n            note: note\n          });\n        },\n        inputValue: this.state.note,\n        onNoteAdd: function onNoteAdd() {\n          return _this3.addNote();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 17\n        }\n      }));\n    }\n  }]);\n\n  return MainStorage;\n}(React.Component);\n\nexport { MainStorage as default };\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    position: 'relative'\n  },\n  scrollView: {\n    maxHeight: '82%',\n    marginBottom: 100,\n    backgroundColor: '#fff'\n  },\n  note: {\n    margin: 20,\n    padding: 20,\n    alignItems: 'center',\n    justifyContent: 'center',\n    borderWidth: 2,\n    backgroundColor: '#f9f9f9',\n    borderColor: '#ddd',\n    borderRadius: 10\n  },\n  noteText: {\n    fontSize: 14,\n    padding: 20\n  }\n});","map":{"version":3,"sources":["C:/Users/shmaj/CodeFellows/401/401n16/ReactNative/app/components/StorageMain.js"],"names":["React","Config","Header","Footer","Notes","MainStorage","props","state","notes","note","AsyncStorage","getItem","length","setState","JSON","parse","Promise","resolve","reject","removeItem","setItem","stringify","cloneNotes","push","updateAsyncStorage","alert","key","splice","map","i","styles","removeNote","noteText","val","container","title","scrollView","renderNotes","addNote","Component","StyleSheet","create","flex","position","maxHeight","marginBottom","backgroundColor","margin","padding","alignItems","justifyContent","borderWidth","borderColor","borderRadius","fontSize"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport {\r\n  StyleSheet, Text, View, TextInput, ScrollView, TouchableOpacity, AsyncStorage,\r\n}\r\n  from 'react-native';\r\nimport Config from './Config';\r\nimport Header from './Header';\r\nimport Footer from './Footer';\r\nimport Notes from './Note';\r\n\r\n\r\nexport default class MainStorage extends React.Component {\r\n\r\n   \r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            notes: [],\r\n            note: ''\r\n        }\r\n\r\n    }\r\n\r\n   \r\n    async componentDidMount() {\r\n\r\n        const notes = await AsyncStorage.getItem('notes');\r\n        if (notes && notes.length > 0) {\r\n            this.setState({\r\n                notes: JSON.parse(notes)\r\n            })\r\n        }\r\n\r\n    }\r\n\r\n  \r\n    updateAsyncStorage(notes) {\r\n\r\n        return new Promise( async(resolve, reject) => {\r\n\r\n            try {\r\n\r\n                await AsyncStorage.removeItem('notes');\r\n                await AsyncStorage.setItem('notes', JSON.stringify(notes));\r\n                return resolve(true);\r\n\r\n            } catch(e) {\r\n                return reject(e);\r\n            }\r\n\r\n        });\r\n\r\n    }\r\n\r\n    \r\n    cloneNotes() {\r\n        return [...this.state.notes];\r\n    }\r\n\r\n   \r\n    async addNote() {\r\n\r\n        if (this.state.note.length <= 0)\r\n            return;\r\n\r\n        try {\r\n\r\n            const notes = this.cloneNotes();\r\n            notes.push(this.state.note);\r\n\r\n            await this.updateAsyncStorage(notes);\r\n\r\n            this.setState({\r\n                notes: notes,\r\n                note: ''\r\n            });\r\n\r\n        }\r\n\r\n        catch(e) {\r\n\r\n            alert(e);\r\n\r\n        }\r\n\r\n    }\r\n\r\n    async removeNote(key) {\r\n\r\n        try {\r\n\r\n            const notes = this.cloneNotes();\r\n            notes.splice(key, 1);\r\n\r\n            await this.updateAsyncStorage(notes);\r\n            this.setState({ notes: notes });\r\n\r\n        }\r\n\r\n        catch(e) {\r\n\r\n            alert(e);\r\n\r\n        }\r\n\r\n    }\r\n\r\n\r\n    renderNotes() {\r\n\r\n        return this.state.notes.map((note, i) => {\r\n            return (\r\n                <TouchableOpacity \r\n                    key={i} style={styles.note} \r\n                    onPress={ () => this.removeNote(i) }\r\n                >\r\n                    <Text style={styles.noteText}>{note}</Text>\r\n                </TouchableOpacity>\r\n            );\r\n        });\r\n\r\n    }\r\n\r\n    render() {\r\n\r\n        let notes = this.state.notes.map((val, key) => {\r\n            return <Note key={key} keyval={key} val={val}\r\n              deleteMethod={() => this.removeNote(key)} />\r\n      \r\n          });\r\n\r\n        return (\r\n            <View style={styles.container}>\r\n\r\n                <Header title={Config.title} />\r\n\r\n                <ScrollView style={styles.scrollView}>\r\n                    {this.renderNotes()}\r\n                </ScrollView>\r\n                <Footer\r\n                    onChangeText={ (note) => this.setState({note})  }\r\n                    inputValue={this.state.note}\r\n                    onNoteAdd={ () => this.addNote() }\r\n                />\r\n\r\n            </View>\r\n        );\r\n\r\n    }\r\n\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        flex: 1,\r\n        position: 'relative'\r\n    },\r\n    scrollView: {\r\n        maxHeight: '82%',\r\n        marginBottom: 100,\r\n        backgroundColor: '#fff'\r\n    },\r\n    note: {\r\n        margin: 20,\r\n        padding: 20,\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        borderWidth: 2,\r\n        backgroundColor: '#f9f9f9',\r\n        borderColor: '#ddd',\r\n        borderRadius: 10,\r\n    },\r\n    noteText: {\r\n        fontSize: 14,\r\n        padding: 20,\r\n    }\r\n});"]},"metadata":{},"sourceType":"module"}